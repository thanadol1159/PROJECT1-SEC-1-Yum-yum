<script setup>
import SystemUiconsSettings from "./components/icons/SystemUiconsSettings.vue";
import { ref } from 'vue'
// import { useEventListener } from '@vueuse/core'
// ‘Yours’.mp3
// window.onload() = ( new Audio( require('../src/song/‘Yours’.mp3') )).play();

let onOff = ref(1)
let open = ref(false)



function MenuOpen(){
  open.value = !open.value
}

function onMusic() { 
  song.play();
  onOff.value = 1
} 
  
function offMusic() { 
  song.pause();
  onOff.value = 0
} 

function changeVolume(){
  let currentVolume = document.querySelector("#volume");
  let song = document.querySelector("#song");
  song.volume = currentVolume.value / 100;
}

</script>

<template>
  <div id="background" class="bg-[url('../src/assets/img/bg.png')] h-screen bg-cover bg-no-repeat z-0">  

       <!-- navbar -->
    <div class="slide-bar">  
      <div id="slideBar" class=" w-96 fixed text-white z-50 h-screen top-0 right-0 bg-black overflow-hidden float-right ease-in duration-300"
      :class="[open ? 'right-0' : 'right-[-100%]']">

        <!-- bar -->
        <div>
          <ul>
        <!--link bar -->
           <li class="pb-16 mt-3"><a class="absolute left-5 text-5xl hover:text-slate-400 " href="javascript:void(0)" @click="MenuOpen()">×</a></li>
           <li><img class="w-24 m-auto" src="../src/assets/img/back_card.png"></li>
           <li><a class="pt-8 text-center text-6xl text-slate-200 block hover:text-zinc-400" @click="MenuOpen()">RESUME</a></li>
           <li><a class="pt-8 text-center text-6xl text-slate-200 block hover:text-zinc-400" href="#">RULE</a></li>
           <li><a class="pt-8 text-center text-6xl text-slate-200 block hover:text-zinc-400" href="#">QUIT</a></li>
        </ul> 
        </div>
        <!-- play music -->
        <div class="flex pr-2 pt-36 justify-center flex-row" >
          <p class="text-2xl pr-3 -top-1.5" >music</p>
          
        <!-- changeVolume music -->
        <audio class="hidden" autoplay loop id="song">
            <source v-on:click="changeVolume()" src="../src/song/‘Yours’.mp3"  type="audio/mpeg">
        </audio>

          <input type="range" min="1" max="100" value="50" id="volume" @click="changeVolume()"
         />

        <!-- stop start music -->
          <label :class="onOff === 1 ? 'text-orange-400' : ' text-white'"
           class="text-2xl pl-5 -top-1.5 cursor-pointer "  for="on">on</label>
          <input type="text" class="hidden" id="on" v-on:click="onMusic()"  checked v-model="onOff"/>

          <label :class="onOff === 0 ? 'text-orange-400' : ' text-white'"
           class="text-2xl pl-5 -top-1.5 cursor-pointer" for="off">off</label>
          <input type="text" class="hidden" id="off" v-on:click="offMusic()" checked v-model="onOff"/>
        </div>
      </div>
      
        <!-- close bar -->
      <button id="setting" class="block text-7xl cursor-pointer text-white hover:text-slate-400 float-right right-3 top-3" 
      @click="MenuOpen()"><SystemUiconsSettings /></button>
    </div>
    
  </div>
</template>

<style scoped>

input[type="range"]{
    appearance: none;
    height: 2px;
    margin: 10px;
}

input[type="range"]::-webkit-slider-thumb{ /* ตัวจุดหาย */
    appearance: none;
    height: 1rem;
    width: 1rem;
    background: #ffc21b;
    border-radius: 50%;
    cursor: pointer
}
</style>
